---
title: "Applying the dictionary"
author: "Jamie Afflerbach"
date: "9/25/2019"
output: html_document
---

This script takes the geotagged twitter data and applies the dictionary to the tweets to identify whether or not each tweet is considered "nature-based".

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(leaflet)
library(sf)
library(mapview)
```

Load data
```{r}
data       <- read_csv("../data/geotag_sb_tweets.csv")
dictionary <- read_csv("../data/dictionary.csv")
```

Create a function to apply to each tweet that identifies whether there is a word in it or not. Since all dictionary words are lower case, we also turn the full_text column lowercase.

```{r}
nature_df <- data %>%
  dplyr::mutate(full_text = tolower(full_text)) %>%
  dplyr::mutate(nature_word = ifelse(
    str_detect(full_text, paste(c(dictionary$word),collapse = '|')) == TRUE, 1, 0
  )) 

write_csv(nature_df, "../data/tweets_nature_categorized.csv")
```
